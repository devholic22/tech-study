## 서비스 출시 전 고려 사항

- 사업 구상 단계에서의 목표는 `서비스 출시 전까지의 생존 및 최종 서비스 출시`이다.
- 서비스를 제품으로 출시하고 나서야 투자가 이루어지기 때문에, 그 전에는 `매우 제한된 자원`으로 운영된다.
- 서비스를 개발하기 전 개발자가 가장 먼저 할 것은 어떤 기술과 아키텍처를 사용할 것인지 고민하는 게 아니라 `개발할 서비스의 성격을 파악`하는 것이다. 그 다음에는 우선순위에 따라 핵심 인력/기술을 구성한 후 MVP 개발, 서비스 출시 및 기술 부채를 줄이는 데 집중한다.

### 1. 서비스 성격 파악

- `서비스의 성격`이란 어느 분야에서 누구를 대상으로 무엇을 제공하는가를 의미한다.
    - 서비스의 성격에 따라 필요한 기능이 다르고 그 기능에 따라 우선순위가 바뀔 수 있다.
        - 계좌 이체, 재고 관리 서비스는 트래픽 처리보다 트랜잭션의 정합성 처리가 더욱 중요하다.
        - 페이스북은 다수의 타임라인에 이미지를 노출하므로 즉시 인코딩하는 게 속도 측면에서 좋지만, 커플 SNS는 이미지를 볼 대상이 한 명이기 때문에 그 이미지를 보기 전까지는 인코딩하지 않아도 되어 저장 공간에 여유가 생긴다.
- 이 단계에서는 반드시 `관련 법과 규제를 확인`해야 한다. 특히 개인정보를 다룬다면 [개인정보 보호법]을 확인하고 준수해야 한다.

### 2. 핵심 인력 구성

- 개발 인력으로 보자면 보통 서버, 클라이언트 (iOS, 안드로이드), 웹 (+ 핀테크 등인 경우 보안 추가) 으로 나눈다.
- 작은 서비스 혹은 대표가 개발자가 아니라면 1인 개발자 체제는 추천하지 않는다. 1인 개발에 따른 시간과 퇴사 시 위험성이 크다.
- 핵심 기술을 결정하는 기준은 서비스와 기술의 적합성보다는 `핵심 개발자가 해당 기술에 능숙한가`에 달려있다.
    - 만약 개발자가 두 명이고 이 두 명의 주력 기술이 다르다면 기술 숙련도가 더 높은 사람의 기술을 선택하는 것이 좋다. (비슷하다면 무관하다.)
    - `지금 유행하는 기술`이 선택의 기준이 되어서는 안 된다. 공유된 자료가 적기 때문에 문제가 생겼을 때 해결법을 찾기 어렵다.
- 구성원을 채용할 때 에는 기술 숙련도 뿐 아니라 `함께 일할 수 있는가`를 바탕으로 평가해야 한다. 그리고 이것은 스타트업일수록 더욱 중요하다.

### 3. 핵심 기술의 구성

- 구성원 모두가 모르는 기술이어도 사업적으로 꼭 필요한 일이라면 누군가는 배워서 개발해야 한다.
- 클라이언트의 경우 `크로스 플랫폼 지원 기술`을 이용하면 적은 인원으로 많은 기능을 개발할 수 있다. 물론 네이티브 언어를 이용하면 성능 측면에서 이점이 있겠지만, 반드시 이용해야 할 이유가 있는 게 아니라면 크로스 플랫폼 지원 기술을 이용하기를 권장한다.
- 구성원이 잘하는 기술이더라도 대중적으로 너무 소수만 사용하는 기술은 지양해야 한다. 서비스가 성공해서 확장하는 순간 그 기술을 사용하는 인력을 충원하기 어려울 수 있기 때문이다. 또한, 사용자가 많은 기술을 사용하면 관련 자료도 많아 문제 해결 시에 도움이 된다.
- 즉, 개발 언어와 플랫폼은 1. 현재 구성원이 잘 다루는 언어와 플랫폼이면서 2. 이미 기존 사용자가 많아서 기술 조언을 쉽게 구할 수 있는 언어와 플랫폼 순으로 고려하여 정한다.
- 데이터 스토어는 아래 기준으로 결정한다.
    - 의료/금융 등 정합성이 중요한 서비스라면 RDBMS를 권장한다.
    - NoSQL은 분산 환경에서의 확장성과 가용성, 대용량 데이터 처리에 초점을 맞춰 설계한 기술이다.
    - NoSQL에서 RDBMS로 이전하는 게 RDBMS에서 NoSQL로 이전하는 것보다 훨씬 어렵고, 문제가 발생했을 때 관련 정보를 얻는 것도 NoSQL 보다는 RDBMS가 더 쉽다.
- 서버는 `클라우드`를 이용할 것을 권장한다.
    - 초기 비용을 절감할 수 있다.
    - 빠른 배포와 운영이 가능하다.
    - 물리 서버에 비해 유지보수 관리 부담도 낮다.
    - 단, 금융/보험 등 분야별로 클라우드 사용을 제재하는 업종도 있다.
- 인프라 구축 방법은 `웹 콘솔`과 `IaC`로 나뉜다. 초기 비용이 들더라도 IaC를 권장한다.
    - IaC는 코드로 인프라를 표현한다.
    - 웹 콘솔로 작업하면 최종 결과만 알 수 있지만, IaC는 형상 관리 도구를 이용해서 인프라 변경 내역을 확인할 수 있다. 또, 자동화에도 적용할 수 있다.
- 로그는 서비스 개발 시작부터 수집해두면 큰 도움이 된다. 개발 중에 쉽게 버그/정보를 확인할 수 있어 장기적으로 개발 기간을 단축할 수 있다.
- 배포는 반드시 쉬워야 하며, 배포의 성공 여부와 진행 사항을 함께 알 수 있도록 해야 한다.

### 4. MVP 개발과 서비스 출시

- MVP 개발 중에는 필요한 기능이 바뀌는 일이 매우 빈번히 일어난다. 서비스의 성격을 벗어나지 않는 한 기능 변경을 자유롭게 해도 된다. 다만, 서비스 출시 이후부터는 코드에 대한 모든 수정을 조심히 해야 한다.
- QA는 안정적인 서비스 출시를 위해 필수이나, QA에서 발견한 문제는 치명적인 문제가 아니라면 빠른 출시 후 수정하는 게 더 좋은 경우도 있다.

### 5. 기술 부채 줄이기

기술 부채가 발생할 수 있는 경우는 아래 7가지이다.

1. 잘못된 선택과 오버 엔지니어링
    - 주니어든 시니어든 오버 엔지니어링을 할 확률이 높다. 이는 서비스 개발을 시작할 때 `모두가 서비스의 성공을 가정`하기 때문이다.
    - 성공할 것이란 믿음이 있어도 `무조건 확장성이나 고가용성을 높이는 방향으로 아키텍처를 복잡하게 설계`하는 것은 좋지 않다.
    - gRPC 대신 HTTP, MSA 대신 모놀리식을 이용해도 대부분 충분하다.
        - 그러나 무조건 MSA 대신 모놀리식을 사용해야 하는 건 아니고, 서비스 도메인이 아주 명확히 분리되어 있다면 이를 분리하는 것이 더 적합할 수 있다.
        - 예를 들어 커머스 서비스의 결제/장바구니는 모놀리식 서비스로 개발하는 게 관리/개발 측면에서 편리하지만, 커머스 사이트와 내부용 교육 사이트처럼 완전히 다른 성격의 서비스가 함께 있다면 처음부터 이 둘을 별도의 서비스로 분리하는 게 좋다.
        - 형상 관리 도구에서 프로젝트를 별도로 분리해야 할 정도로 독립적이라면 서비스도 분리하기를 권장한다.
2. 스파게티 코드/빈약한 예외 처리
    - 대부분 MVP 개발 이후 리팩터링을 목표하지만, 현실에서는 MVP 개발 코드를 꽤 오래 사용하기에 스파게티 코드가 될 확률이 높다.
    - 예외 처리를 구성할 때에는 반드시 기획, 운영, 개발자가 함께 논의해야 한다.
3. 자동화된 테스트 케이스의 부족
    - 신규 테스트는 사람이 직접 진행하는 게 유리하나, 그 외적으로 반복해서 진행하는 테스트는 사람이 진행하기에는 비효율적이다.
    - `리그레션 테스트 (Regression test)`는 코드를 변경한 다음 기존 기능이 여전히 올바르게 작동하는지 확인하는 테스트이다. 코드 변경 후 기존 기능에 부작용은 없는지 검증할 때 유용하다.
    - 자동화된 테스트를 작성할 때에는 아래 사항을 고려한다.
        1. 모든 테스트를 작성할 수는 없다. 특히 안드로이드 앱이나 iOS 앱을 개발할 때 UI 테스트는 자동화가 어렵다.
        2. 일부 기능은 테스트를 작성하기 복잡한 케이스가 있다. 아키텍처를 잘못 구성하면 테스트 코드 작성이 어렵다.
        3. 시간이 부족해서 기능만 개발해서 바로 출시해야 하는 일도 발생한다.
        4. 테스트가 많아지면 테스트를 수행하는 시간이 너무 길어져서 점점 테스트하기가 힘들다.
4. 로그 수집 또는 확인 방법
    - 서버를 늘릴 때에도 쉽게 로그를 수집하고 검색할 수 있도록 미리 제대로 된 로그 수집/분석 시스템을 준비해야 생산성을 유지할 수 있다. 엘라스틱 서치, AWS 오픈서치는 스타트업에게는 비용 부담이 조금 있고, 그라파나 로키 or 그레이로그 등 다른 도구들도 알아보면 좋다.
5. 모니터링의 부족
    - 장애가 발생했는데 감지하지 못한다면 서비스의 신뢰도는 하락하고 사용자가 떠나게 된다.
    - 그래서 서비스의 상태를 바로 판단할 수 있는 시스템을 구축하는 게 좋다.
        1. CPU 사용량
        2. 메모리 사용량
        3. 디스크 사용량
        4. 네트워크 사용량
        5. 서버의 예외 발생량
        6. DB 서버의 CPU 사용량과 Slow Log 등
    - 모니터링에서 가장 중요한 점은 모니터링되는 정보와 모니터링되지 않은 정보를 파악하는 일이다. 완벽하게 모니터링할 수는 없으므로 놓친 부분이 있을 때 마다 보완해나가도록 한다.
6. 수동 배포나 서비스 설정 변경
    - 수동 배포를 하면 특정 인원만 반복적으로 배포할 확률이 커진다. 클릭 한 번에 배포할 수 있는 자동화된 배포 시스템을 만드는 일이 중요하다.
    - 배포가 빠르게 되면 그만큼 롤백도 빠르게 될 수 있어야 한다. (서비스 설정 변경 시에도 동일하다.)
7. 통계 정보
    - 서비스의 성장 지표를 확인할 수 있는 DAU, MAU처럼 서비스를 사용하는 사용자의 정보를 추적해야 한다.

> 모든 기술 부채를 제거하면서 동시에 신속하게 MVP를 출시하는 게 가장 이상적이지만, 현실적으로 불가능하기에 적절한 기술 부채 관리와 신속한 시장 진입 사이에서 전략적 균형점을 찾아야 한다. 핵심 기능의 안정성은 보장하되, 일부 기술 부채는 계획적으로 수용하는 접근법이 필요하다.
>

### 서비스 출시 전 체크 리스트

- 개발하는 서비스가 무엇인가?
    - [ ]  서비스 대상은 누구인가?
    - [ ]  서비스 국가는 어디인가?
    - [ ]  서비스와 관련된 법률을 확인했는가?
- 핵심 인력은 구성했는가?
    - [ ]  우리 서비스에 맞는 기술의 전문가가 있는가?
    - [ ]  최소한의 인원 구성이 되었는가?
        - [ ]  개발자가 백엔드, 프론트엔드 개발이 모두 가능한가?
        - [ ]  백엔드 담당자와 프론트엔드 담당자가 있는가?
    - [ ]  서비스에 필요한 로그는 모두 저장되고 검색할 수 있는가?
        - [ ]  서비스 요청 로그
        - [ ]  에러 로그
    - [ ]  핵심 기술은 선택했는가?
        - [ ]  언어와 플랫폼, 데이터 스토어를 선택했는가?
        - [ ]  클라우드 혹은 서버를 별도로 운영할지 선택했는가? (스타트업에는 클라우드를 권장한다.)
        - [ ]  인프라 관리 방식을 웹 콘솔과 IaC 도구 중 선택했는가? (스타트업에는 IaC를 권장한다.)
        - [ ]  로그 수집과 검색을 설정하고 쉬운 배포 방식을 구축했는가?
    - [ ]  서비스 성장 등에 필요한 지표를 쉽게 추출할 수 있는가?
